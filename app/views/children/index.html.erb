<div class="index-child-container width-index">
  <div class="row">
    <div class="col-12 col-md-8 col-lg-8">
      <div class="container width-children-cards">
        <h1 class='text-center index-h1'>Your children list</h1>
        <div class="d-flex justify-content-center">
          <a class="btn-child-show btn btn-primary my-1" href="/children/new"><span>Add Member <i class="fas fa-user-plus"></i></span></a>
        </div>
        <% @children.each do |child| %>
          <div class="card-product my-4 ">
            <% if child.photo.attached? %>
              <%= cl_image_tag child.photo.key%>
            <% else %>
              <%= cl_image_tag "upload-photo.jpg" %>
            <% end %>
            <div class="card-product-infos child-absolute">
              <h2><%= child.full_name %></h2>
              <div class="d-flex justify-content-between">
                <div class ='seemore'>
                  <p>Parents: <%= child.parent %> </p>
                  <% if child.hobby.present? %>
                    <p class='mb-4'>Hobby: <%= child.hobby %></p>
                  <% else %>
                    <p class='mb-4'>Hobby: None yet.</p>
                  <% end %>
                  <%= link_to "See more", child_path(child), class: "btn-child-show btn-small btn-primary p-2" %>
                </div>
                <div>
                  <p> ðŸŽ‚ <%= child.birthday %></p>
                  <p><%= child.age %></p>
                  <%= link_to 'ðŸ–‹', edit_child_path(child), class: 'edit-child'%>
                  <%= link_to child_path(child),
                  method: :delete, class: 'delete-child',
                  data: { confirm: "delete #{child.first_name.capitalize} #{child.last_name.capitalize}?"} do %>
                    <i class="fas fa-times"></i>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <div class="col-12 col-md-4 col-lg-4 sidenav mx-auto calendar-height" style="overflow:auto">
      <h4 class="mt-4 mb-3">Event Calendar</h4>
      <div class="mb-5" id="events_calendar_index" style="padding-top: 30px" >
        <%# <% @children.each do |child| %>
          <%# <% child.events.each do |event| %>
            <%# <% if event.start_date >  Time.now %>
            <%# <% @all_events << event %>
            <%# <% end %>
            <%# <% end %>
            <%# <% end %>
            <%= render partial: "calendar_index", locals: {events: @all_events} %>
          </div>
          <div class="mt-5 mb-5" style="text-align:left">
            <div class="container calendar-events">
              <h4 class="mb-4" style="text-align:center">Upcoming Events</h4>
              <% @all_events.sort_by(&:start_date).each do |event|%>
                <p><strong><%= event.start_date.strftime("%b #{event.start_date.day.ordinalize}")%></strong>: <%= event.child.first_name.capitalize %> | <%= event.occasion %></p>
              <% end %>
            </div>
            <div class="container calendar-events">
              <h4 class="mb-4" style="text-align:center">Past event without photos</h4>
              <% @all_past_events.sort_by(&:start_date).each do |event|%>
                <p><strong><%= event.start_date.strftime("%b #{event.start_date.day.ordinalize}")%></strong>: <%= event.child.first_name.capitalize %> | <%= event.occasion %> event</p>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
